<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
      <!-- Timeblocks go here -->

      <div class="container">
        <div class="table-responsive">
          <table class="table">
            <tbody id="schedule-table">
              <tr id="09">
                <th scope="row" class="align-middle time">09:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-9"></textarea>
                </td>
                <td id="save-0900" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="10">
                <th scope="row" class="align-middle time">10:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-10"></textarea>
                </td>
                <td id="save-1000" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="11">
                <th scope="row" class="align-middle time">11:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-11"></textarea>
                </td>
                <td id="save-1100" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="12">
                <th scope="row" class="align-middle time">12:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-12"></textarea>
                </td>
                <td id="save-1200" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="13">
                <th scope="row" class="align-middle time">13:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-13"></textarea>
                </td>
                <td id="save-1300" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="14">
                <th scope="row" class="align-middle time">14:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-14"></textarea>
                </td>
                <td id="save-1400" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="15">
                <th scope="row" class="align-middle time">15:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-15"></textarea>
                </td>
                <td id="save-1500" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="16">
                <th scope="row" class="align-middle time">16:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-16"></textarea>
                </td>
                <td id="save-1600" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="17" class="border">
                <th scope="row" class="align-middle time">17:00</th>
                <td class="input-cell">
                  <textarea class="input-area" id="area-17"></textarea>
                </td>
                <td id="save-1700" class="align-middle save-button-cell">
                  <div class="text-center">
                    <button
                      class="btn btn-outline-secondary save-button"
                      type="button"
                    >
                      <i class="far fa-save"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
      

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>


<script>
    var scheduleArr = [];
    var scheduleObj = {};
    var storedSchedule;
    var savedSchedule;
    var date = moment().format('LL');
    day = 0;

$(document).ready(function() {
  init();

  function init() {
    displaySchedule();
    scheduleFocus();
    saveEvent();
  }

  function scheduleFocus() {
    var currentHourInt = parseInt(moment().format('HH'));

    var timeIDs = $('#schedule-table tr[id]')
      .map(function() {
        return this.id;
      })
      .get();

    if (day < 0) {
      $('.input-area').css('background-color', 'grey');
    } else if (day > 0) {
      $('.input-area').css('background-color', 'lightblue');
    } else {
      for (var i = 0; i < timeIDs.length; i++) {
        var timeIDsInt = parseInt(timeIDs[i]);
        if (timeIDsInt < currentHourInt) {
          $('#' + timeIDs[i])
            .find('textarea')
            .css('background-color', 'grey');
        } else if (timeIDsInt === currentHourInt) {
          $('#' + timeIDs[i])
            .find('textarea')
            .css('background-color', '#ccffff');
        } else {
          $('#' + timeIDs[i])
            .find('textarea')
            .css('background-color', 'lightblue');
        }
      }
    }
    setInterval(scheduleFocus, 1000);
  }

  function displaySchedule() {
    var timeArray = [ 9, 10, 11, 12, 13, 14, 15, 16, 17]
    for (var i = 0; i <timeArray.length; i++){
      $('#area-'+ timeArray[i]).val(localStorage.getItem(timeArray[i]));
    }
  }

  function saveEvent() {
    $('.save-button').on('click', function() {
      var trId = $(this)
        .closest('tr')
        .attr('id');
      var textAreaVal = $(this)
        .closest('tr')
        .find('textarea')
        .val()
        .trim();

      localStorage.setItem(trId, textAreaVal);
    });
  }
});
</script>

    </div>
   
    <script>
      var TodayDate = moment();
      var currentDayEL = document.getElementById('currentDay');
      currentDayEL.innerHTML = TodayDate.format('LLLL');
    </script>



  </body>
</html>
